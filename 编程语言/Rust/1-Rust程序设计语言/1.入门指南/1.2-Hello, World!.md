# Hello, World!

- [Hello, World!](#hello-world)
  - [编写 Rust 源文件](#编写-rust-源文件)
  - [分析 Rust 源文件](#分析-rust-源文件)
  - [编译并运行 Rust 程序](#编译并运行-rust-程序)

## 编写 Rust 源文件

Rust 源文件总是以 .rs 扩展名结尾。

新建一个源文件，命名为 main.rs，并输入以下内容：

```rust
fn main() {
    println!("Hello, world!");
}
```

## 分析 Rust 源文件

分析这个 Rust 程序
现在，让我们回过头来仔细看看 “Hello, world!” 程序中到底发生了什么。这是第一块拼图：

```rust
fn main() {

}
```

这几行定义了一个 Rust 函数。

`main` 函数是一个特殊的函数：在可执行的 Rust 程序中，它总是最先运行的代码。

第一行代码声明了一个叫做 `main` 的函数，它没有参数也没有返回值。如果有参数的话，它们的名称应该出现在小括号 `()` 中。

还须注意，函数体被包裹在大括号 `{}` 中。Rust 要求所有函数体都要用花括号包裹起来。一般来说，将左花括号与函数声明置于同一行并以空格分隔，是良好的代码风格。

如果你希望在 Rust 项目中保持一种标准风格，可以使用名为 `rustfmt` 的自动格式化工具将代码格式化为特定的风格。该工具已经包含在标准的 Rust 发行版中。

```bash
$ rustfmt main.rs
```

在 `main()` 函数中是如下代码：

```rust
    println!("Hello, world!");
```

这行代码完成这个简单程序的所有工作：在屏幕上打印文本。

这里有四个重要的细节需要注意：

1. Rust 的缩进风格使用 4 个空格，而不是 1 个制表符（tab）。
2. `println!` 调用了一个 Rust 宏（macro）。如果是调用函数，则应输入 `println`（没有!）。我们将在第十九章详细讨论宏。现在你只需记住，当看到符号 `!` 的时候，就意味着调用的是宏而不是普通函数，并且宏并不总是遵循与函数相同的规则。
3. `"Hello, world!"` 是一个字符串。我们把这个字符串作为一个参数传递给 `println!`，字符串将被打印到屏幕上。
4. 该行以分号 `;` 结尾，这代表一个表达式的结束和下一个表达式的开始。大部分 Rust 代码行以分号结尾。

## 编译并运行 Rust 程序

```bash
# 编译
$ rustc main.rs
# 运行
$ ./main
Hello, world!
```

使用 `rustc` 命令编译成功后，Rust 会输出一个二进制的可执行文件（在 Windows 下是 main.exe，其它平台是 main）。

>如果你更熟悉动态语言，如 Ruby、Python 或 JavaScript，则可能不习惯将编译和运行分为两个单独的步骤。Rust 是一种 **预编译静态类型（ahead-of-time compiled）** 语言，这意味着你可以编译程序，并将可执行文件送给其他人，他们甚至不需要安装 Rust 就可以运行。如果你给他人一个 .rb、.py 或 .js 文件，他们需要先分别安装 Ruby，Python，JavaScript 实现（运行时环境，VM）。不过在这些语言中，只需要一句命令就可以编译和运行程序。这一切都是语言设计上的权衡取舍。
>
>仅仅使用 rustc 编译简单程序是没问题的，不过随着项目的增长，你可能需要管理你项目的方方面面，并让代码易于分享。接下来，我们要介绍一个叫做 Cargo 的工具，它会帮助你编写真实世界中的 Rust 程序。