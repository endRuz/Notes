# dotnet CLI

- [dotnet CLI](#dotnet-cli)
  - [dotnet new](#dotnet-new)
  - [dotnet sln](#dotnet-sln)
  - [dotnet add/list/remove package](#dotnet-addlistremove-package)
  - [dotnet add/list/remove reference](#dotnet-addlistremove-reference)
  - [dotnet restore](#dotnet-restore)


## dotnet new

```powershell
mkdir GetStarted
cd GetStarted
# create a solution named GetStarted
dotnet new sln -n GetStarted
# create a console project named App
dotnet new console -n App
# create .gitignore file to ignore Visual Studio temporary files, build results, and files generated by popular Visual Studio add-ons.
dotnet new gitignore
# create global.json
dotnet new globaljson --sdk-version 6.0.310
# list all templates which you can create
dotnet new list
```

In .Net, a solution can contains one or many projects.

Solution uses two file types (*.sln* and *.suo*) to store settings for solutions.

Each project contains an project file. The file extension reflects the type of project, for example:
- C# project (*.csproj*)
- Visual Basic project (*.vbproj*)
- database project (*.dbproj*)

## dotnet sln

```powershell
# add project to the solution
dotnet sln .\GetStarted.sln add .\App\App.csproj
# list all projects in a solution file
dotnet sln list
# remove project from the solution
dotnet sln .\GetStarted.sln remove .\App\App.csproj
```

In fact, command `dotnet sln` can do less than Visual Studio. We can only add projects and not other files (e.g., `.gitignore`, `README.md` ...).

Hope Microsoft can enhance it in the future.

In Visual Studio, we can right click solution -> `Add` -> `Existing Item...` or `New Item...` to add or create your file.

## dotnet add/list/remove package

There are many methods to manage package:

- Visual Studio
- Package Manager Console (PowerShell)
- NuGet CLI
- dotnet CLI

Only dotnet Cli is introduced here.

Using `dotnet add package` to add or update a package reference in a project file.

```powershell
# Add Microsoft.EntityFrameworkCore NuGet package to a project:
dotnet add package Microsoft.EntityFrameworkCore
# Add a specific version of a package to a project:
dotnet add App.csproj package Microsoft.Azure.DocumentDB.Core -v 1.0.0
#Add a package using a specific NuGet source:
dotnet add package Microsoft.AspNetCore.StaticFiles -s https://dotnet.myget.org/F/dotnet-core/api/v3/index.json
```

After running command, the `.csproj` file contains a `<PackageReference>` element for the referenced package.

```xml
<ItemGroup>
    <PackageReference Include="Microsoft.EntityFrameworkCore" Version="7.0.4" />
</ItemGroup>
```

Using `dotnet list package` to list the package references for a project or solution.

```powershell
dotnet list package
Project 'App' has the following package references
   [net6.0]:
   Top-level Package                    Requested   Resolved
   > Microsoft.EntityFrameworkCore      7.0.4       7.0.4
```

Using `dotnet remove package` to remove package reference from a project file.

```powershell
dotnet remove package Microsoft.EntityFrameworkCore
```

## dotnet add/list/remove reference

## dotnet restore

The `dotnet restore` command uses NuGet to restore dependencies as well as project-specific tools that are specified in the project file. In most cases, you don't need to explicitly use the `dotnet restore` command, since a NuGet restore is run implicitly if necessary when you run the following commands:

- `dotnet new`
- `dotnet build`
- `dotnet build-server`
- `dotnet run`
- `dotnet test`
- `dotnet publish`
- `dotnet pack`
